(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/inquire/index"],{"0da2":function(t,e,n){"use strict";n.r(e);var a=n("736e"),i=n("e26f");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("8c13");var o,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"fb9a750e",null,!1,a["a"],o);e["default"]=c.exports},"736e":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={scrollViewTab:function(){return n.e("components/scroll-view-tab/scroll-view-tab").then(n.bind(null,"7316"))},mescrollUni:function(){return Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-uni")]).then(n.bind(null,"acef"))},uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"e88b"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,2!=t.tabIndex?t._f("filterCk")(t.tabList[t.tabIndex].getMyOrdersList):null);t.$mp.data=Object.assign({},{$root:{f0:n}})},r=[]},"8c13":function(t,e,n){"use strict";var a=n("a20e"),i=n.n(a);i.a},a20e:function(t,e,n){},a632:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,i=s(n("f1fd")),r=s(n("79f4")),o=s(n("1239"));function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return f(t)||u(t)||d(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){if(t){if("string"===typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function f(t){if(Array.isArray(t))return m(t)}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var b=null,h=null,p=null,g=function(){n.e("components/ble-pop/ble-pop").then(function(){return resolve(n("75ca"))}.bind(null,n)).catch(n.oe)},I=function(){n.e("components/alert-menu/alert-menu").then(function(){return resolve(n("5c89"))}.bind(null,n)).catch(n.oe)},S={components:{BlePop:g,AlertMenu:I},data:function(){return{menuList:[{name:"再来一单",id:"zlyd"},{name:"复制订单",id:"fzdd"}],tab:[{name:"未打印",id:0,total:0},{name:"已打印",id:1,total:0},{name:"已取消",id:2,total:0},{name:"全部",id:3,total:0}],tabIndex:0,tabList:[{id:0,pageNum:1,pageSize:15,getMyOrdersList:[],endSuccess:!1,total:0,all_ck:!1},{id:1,pageNum:1,pageSize:15,getMyOrdersList:[],endSuccess:!1,all_ck:!1,total:0},{id:2,pageNum:1,pageSize:15,getMyOrdersList:[],endSuccess:!1,all_ck:!1,total:0},{id:3,pageNum:1,pageSize:15,getMyOrdersList:[],endSuccess:!1,all_ck:!1,total:0}],billCodeSearch:"",downOption:{use:!0,auto:!1},timeIndex:2,timeScreen:[{name:"今天",id:0,time:""},{name:"近7天",id:1,time:""},{name:"近30天",id:2,time:""},{name:"自定义",id:3,time:""}],isScreen:!1,isShowDate:!1,expressSearch:"",mescroll:null,upOption:{auto:!1,page:{num:1,size:15},noMoreSize:5,empty:{use:!0,tip:"~ 暂无订单 ~"}},isData:!1,teamInfo:{},memberSearch:"",memberInfo:{},memberToken:"",endDate:"",startDate:"",before:"",after:"",teamModel:"",isFilter:!1,operatItem:{},timeShow:!0,filter_old:[]}},onLoad:function(){a=this,this.initDate()},onShow:function(){a=this;var e=a.$getStorageSync("userData");if("undefined"==typeof e)return t.showModal({title:"提示",content:"请先登录授权~",success:function(e){e.confirm&&t.switchTab({url:"/pages/tabbar/my/index?pageId=send"})}}),!1;var n=getApp().globalData.currentIndex;""!==n&&null!==n&&void 0!==n&&0==n?(a.tabIndex=n,getApp().globalData.currentIndex="",a.tabList[this.tabIndex].getMyOrdersList=[],a.tabList[a.tabIndex].pageNum=1,a.$nextTick((function(){a.mescroll.triggerDownScroll()}))):1==n?getApp().globalData.currentIndex="":a.$nextTick((function(){a.mescroll.triggerDownScroll()}));var i=this.$getStorageSync("token");i&&a.getWxGroupByOpenId();var r=a.$getStorageSync("teamInfo");r&&(a.teamInfo=r),a.teamModel="1"==a.$getStorageSync("teamModel")?"1":"2",wx.setNavigationBarTitle({title:"订单查询".concat("1"===a.$getStorageSync("teamModel")?"（团队）":"")})},mounted:function(){var e=this;t.$on("bleOk",(function(t){t&&(e.$refs.showpopup.close(),setTimeout((function(){}),500))})),t.$emit("bleConnectHome")},watch:{},computed:{},onUnload:function(){b&&clearTimeout(b),t.$off("bleOk")},methods:{confirm_search:function(){var t=this;t.mescroll.triggerDownScroll()},searchMember:function(){var e=this,n={groupId:e.teamInfo.groupId,nickName:e.memberSearch};e.$api.getWxGroupByName(n).then((function(n){200==n.code&&null!=n.data?(e.memberInfo=n.data,e.memberToken=n.data.openId):(t.showToast({icon:"none",duration:1500,title:"未搜索到团员信息~"}),e.memberInfo={})}))},confirmFilter:function(){var t=this;t.tabList[t.tabIndex].pageNum=1,t.tabList[t.tabIndex].getMyOrdersList=[],t.isScreen=!1,t.isFilter=!0,t.mescroll.triggerDownScroll()},editTime:function(){var t=this;t.timeShow=!1,t.$refs["NavDate"].opencalendar()},refreshFilter:function(){var t=this;t.timeIndex=2,t.isFilter=!1,t.memberSearch="",t.memberToken="",t.memberInfo={},t.before=this.$momm.getdate(-30),t.after=this.$momm.getdate()},clearMember:function(){var t=this;t.memberInfo={},t.memberToken="",t.memberSearch=""},getWxGroupByOpenId:function(){var t=this;t.$api.getWxGroupByOpenId().then((function(e){200==e.code&&null!=e.data?(t.$setStorageSync("teamInfo",e.data),t.teamInfo=e.data):t.$setStorageSync("teamInfo","")}))},onScreen:function(){},initDate:function(){this.before=this.$momm.getdate(-30),this.after=this.$momm.getdate()},moreMenu:function(t){var e=this;e.operatItem=t,e.$refs["showpopup1"].open()},cancelMenu:function(){var t=this;t.$refs["showpopup1"].close()},bindBody:function(){var t=this;t.isScreen&&t.timeShow&&(t.confirmFilter(),t.isScreen=!1)},getFilterData:function(){this.isScreen=!0},selectOperat:function(e){var n=this;switch(e.item.id){case"zlyd":var a={orderBill:n.operatItem.orderBill,operatType:"again"};t.navigateTo({url:"/pages/order/send/index?pageId=ddcx&data="+JSON.stringify(a)});break;case"fzdd":n.operate="szqx";var i={orderBill:n.operatItem.orderBill};n.$api.copyOrder(i).then((function(t){200==t.code?wx.showToast({title:"复制订单成功",icon:"none",duration:1500}):wx.showToast({title:"复制订单失败",icon:"none",duration:1500})}));break;default:}n.$refs["showpopup1"].close()},selectRadioCheck:function(t){var e=t.list,n=t.index;e.ck?this.tabList[this.tabIndex].getMyOrdersList[n].ck=!1:this.tabList[this.tabIndex].getMyOrdersList[n].ck=!0,this.isAllCheck()},isAllCheck:function(){this.tabList[this.tabIndex].getMyOrdersList.length?this.tabList[this.tabIndex].all_ck=!this.tabList[this.tabIndex].getMyOrdersList.some((function(t){return"false"==JSON.stringify(t.ck)})):this.tabList[this.tabIndex].all_ck=!1},allRadio:function(){var t=[];this.tabList[this.tabIndex].getMyOrdersList.forEach((function(e,n){"已取消"!=e.billStatus&&t.push(e)})),this.tabList[this.tabIndex].all_ck?(this.tabList[this.tabIndex].all_ck=!1,t.forEach((function(t){t.ck=!1}))):(this.tabList[this.tabIndex].all_ck=!0,t.forEach((function(t){t.ck=!0})))},ChangePrint:function(){var e=this;null!=h&&clearTimeout(h),h=setTimeout((function(){i.default.getConnectState((function(t){if(t.state&&200==t.code){var n="",s=e.tabList[e.tabIndex].getMyOrdersList,c=0;s.forEach((function(t,e){1==t.ck&&(0==c?n=t.orderBill:n+=","+t.orderBill,c++,t.ck=!1)}));var l={orderBill:n};a.$api.getOrderPrint(l).then((function(t){if(200==t.code&&t.data.length>0)return t.data.forEach((function(t,e){var n=[];if(n.push(t.billCode),t.pieceNumber>1&&t.billCodeSub1){var a=t.billCodeSub1.split(";").filter((function(t){return""!=t}));n=n.concat(a)}n.forEach((function(e,n){t.billCode=e;var a=(0,o.default)(r.default["韵达同城联"],t),s=a.join("");i.default.sendCmd(s)}))})),l.blPrint=1,e.$api.updateBlPrint(l);Promise.reject()})).then((function(t){200==t.code?a.mescroll.triggerDownScroll():wx.showToast({title:t.message,icon:"none",duration:2e3})}))}}),(function(n){console.log(n);var a={printlist:e.tabList[e.tabIndex],tabIndex:e.tabIndex};t.navigateTo({url:"/pages/myPrinter/myPrinter?pageId=ddcx&data="+JSON.stringify(a)})}))}),500)},swiperChange:function(t){var e=t.detail;this.tabIndex=e.current,this.mescroll.triggerDownScroll()},delOrders:function(e){var n=this,a={CancelReason:"用户取消",orderBill:e.orderBill};t.showModal({title:"提示",content:"是否确定取消~",success:function(t){t.confirm&&n.$api.cancelOrder(a).then((function(t){200==t.code&&(wx.showToast({title:"取消成功~",icon:"none",duration:2e3}),n.mescroll.triggerDownScroll())}))}})},cancelList:function(){var t=this,e=this;null!=p&&clearTimeout(p),p=setTimeout((function(){var n=t.tabList[t.tabIndex].getMyOrdersList;n.forEach((function(t,n){if(1==t.ck&&("待处理"==t.billStatus||"已分网点"==t.billStatus||"已分业务员"==t.billStatus||"已接单"==t.billStatus)){var a={CancelReason:"用户取消",orderBill:t.orderBill};e.$api.cancelOrder(a).then((function(n){200==n.code?(t.ck=!1,e.mescroll.triggerDownScroll()):wx.showToast({title:"订单号:"+t.orderBill+",取消失败~",icon:"none",duration:1500})}))}}))}),500)},onTabTap:function(t){this.tabIndex=t.id,this.mescroll.triggerDownScroll()},clickTime:function(t){switch(this.timeIndex=t,t){case 0:this.before=this.$momm.getdate(),this.after=this.$momm.getdate();break;case 1:this.before=this.$momm.getdate(-7),this.after=this.$momm.getdate();break;case 2:this.before=this.$momm.getdate(-30),this.after=this.$momm.getdate();break;case 3:a.$refs["NavDate"].opencalendar(),a.timeShow=!1;break;default:this.before=this.$momm.getdate(-30),this.after=this.$momm.getdate()}},copy:function(e){t.setClipboardData({data:e,success:function(){}})},confirmTime:function(t){var e=this;this.before=t.before,this.after=t.after,e.isScreen=!0,e.timeShow=!0},editOrders:function(e){var n={orderBill:e.orderBill,operatType:"edit"};t.navigateTo({url:"/pages/order/send/index?pageId=ddcx&data="+JSON.stringify(n)})},goOrderDetails:function(e){var n={type:"0"==this.tabIndex?0:1,billCode:e.billCode,item:e,isclick:1};getApp().globalData.currentIndex=1,t.navigateTo({url:"/pages/order-details/index?pageId=ddcx&data="+JSON.stringify(n)})},inputVal:function(t){var e=this;e.expressSearch=t},search:function(){var t=this;t.mescroll.triggerDownScroll()},mescrollInit:function(t){this.mescroll=t},downCallback:function(t){var e=this;e.tabList[e.tabIndex].pageNum=1,e.tabList[e.tabIndex].endSuccess=!1,t.resetUpScroll()},upCallback:function(t){var e,n=this,a=this;try{JSON.parse(a.$getStorageSync("userData"))}catch(r){console.log(r)}e="3"==this.tabIndex?"":"2"==this.tabIndex?2:"0"==this.tabIndex?0:1;var i={billCode:a.expressSearch,blType:e,pageNum:a.tabList[this.tabIndex].pageNum,pageSize:a.tabList[this.tabIndex].pageSize,phone:"",openId:this.$getStorageSync("token"),startDate:""!=this.before?this.before+" 00:00:00":"",endDate:""!=this.after?this.after+" 23:59:59":""};"1"==a.teamModel&&("3"!=a.teamInfo.status?(i.groupId=a.teamInfo.groupId,i.openId=a.memberToken):(i.groupId=a.teamInfo.groupId,i.openId=a.teamInfo.openId)),this.$api.getMyOrders(i).then((function(t){if(200==t.code){var e,i=t.data;1==a.tabList[a.tabIndex].pageNum&&(a.tabList[n.tabIndex].getMyOrdersList=[],a.tabList[a.tabIndex].pageNum=1),i.data.forEach((function(t){a.tabList[a.tabIndex].all_ck&&"已取消"!=t.billStatus?t.ck=!0:t.ck=!1})),a.tabList[a.tabIndex].total=i.total,a.tab[a.tabIndex].total=i.total,a.tabList[n.tabIndex].getMyOrdersList=(e=a.tabList[n.tabIndex].getMyOrdersList).concat.apply(e,c(i.data)),a.tabList[a.tabIndex].pageNum++,i.data.length<a.tabList[a.tabIndex].pageSize&&(a.tabList[a.tabIndex].endSuccess=!0),a.mescroll.endByPage(i.data.length,i.total)}else a.mescroll.endErr();a.isAllCheck()})).catch((function(){a.mescroll.endErr()}))},getOrderData:function(){var t=this;this.tabIndex,t.tabList[this.tabIndex].pageNum,t.tabList[this.tabIndex].pageSize}}};e.default=S}).call(this,n("543d")["default"])},bf0f:function(t,e,n){"use strict";(function(t){n("5e56");a(n("66fd"));var e=a(n("0da2"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},e26f:function(t,e,n){"use strict";n.r(e);var a=n("a632"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a}},[["bf0f","common/runtime","common/vendor"]]]);