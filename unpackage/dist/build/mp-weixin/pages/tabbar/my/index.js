(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/my/index"],{"182d":function(e,n,t){"use strict";(function(e,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=t("1d5b"),r=t("2f62");function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){d(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u={data:function(){return{panelListsData:[{name:"地址簿",icon:"&#xe65a;",path:"/pages/myaddress/index",id:"dzb"},{name:"专属快递员",icon:"&#xe640;",path:"/pages/mycourier/index",id:"zskdy"},{name:"实名认证",icon:"&#xe642;",path:"/pages/myrealname/index",id:"smrz"},{name:"月结账户",icon:"&#xe64c;",path:"/pages/bind-monthly/index",id:"yjzh"},{name:"客服电话",icon:"&#xe618;",path:"",id:"kfdh"},{name:"公司简介",icon:"&#xe65c;",path:"/pages/aboutUs/index",id:"gsjj"},{name:"消息设置",icon:"&#xe65b;",path:"/pages/message-notify/index",id:"xxtzsz"}],userData:!1,nameImg:{},sendRec:{},teamInfo:{},teamModel:""}},onShow:function(){var e=this,n=e.$getStorageSync("token");n||e.getToken();var t=e.$getStorageSync("teamInfo");t&&(e.teamInfo=t),e.getUserInfoEcho();var a=e.$getStorageSync("teamModel");e.teamModel=a;e.panelListsData;"1"==a?e.panelListsData=[{name:"地址簿",icon:"&#xe65a;",path:"/pages/myaddress/index",id:"dzb"},{name:"实名认证",icon:"&#xe642;",path:"/pages/myrealname/index",id:"smrz"},{name:"客服电话",icon:"&#xe618;",path:"",id:"kfdh"},{name:"公司简介",icon:"&#xe65c;",path:"/pages/aboutUs/index",id:"gsjj"},{name:"消息设置",icon:"&#xe65b;",path:"/pages/message-notify/index",id:"xxtzsz"}]:(console.log(e.panelListsData),e.panelListsData=[{name:"地址簿",icon:"&#xe65a;",path:"/pages/myaddress/index",id:"dzb"},{name:"专属快递员",icon:"&#xe640;",path:"/pages/mycourier/index",id:"zskdy"},{name:"实名认证",icon:"&#xe642;",path:"/pages/myrealname/index",id:"smrz"},{name:"月结账户",icon:"&#xe64c;",path:"/pages/bind-monthly/index",id:"yjzh"},{name:"客服电话",icon:"&#xe618;",path:"",id:"kfdh"},{name:"公司简介",icon:"&#xe65c;",path:"/pages/aboutUs/index",id:"gsjj"},{name:"消息设置",icon:"&#xe65b;",path:"/pages/message-notify/index",id:"xxtzsz"}])},computed:{},onLoad:function(){o=this},methods:c(c({},(0,r.mapActions)([i.SET_CLEAR_STATE])),{},{selectItem:function(n){if("kfdh"==n.id)e.makePhoneCall({phoneNumber:"021-39209005"});else{var t={tabIndex:0},a=o.$getStorageSync("userData");a?e.navigateTo({url:n.path+"?pageId="+n.id+"&data="+JSON.stringify(t)}):e.showToast({title:"请先进行登录操作~",icon:"none",duration:1500})}},goSearch:function(n){getApp().globalData.tabIndex=n,e.switchTab({url:"/pages/tabbar/inquire/index"})},getToken:function(){var n=this;e.login({provider:"weixin",success:function(t){var a={code:t.code};n.$api.getOpenIdByCode(a).then((function(t){console.log(t),200==t.code?(n.$setStorageSync("token",t.data.openid),n.$setStorageSync("login",t.data)):e.showToast({title:"请退出页面重进~",icon:"none",duration:1500})}))}})},getUserInfoEcho:function(){var e=this;this.$checkToken();var n=e.$getStorageSync("userData"),t=this.$getStorageSync("userNameImg");n&&(e.userData=JSON.parse(n)),t&&(e.nameImg=JSON.parse(t))},getUserInfo:function(){var n=this,t=this,a=t.$getStorageSync("token");a?e.getUserProfile({desc:"用于完善会员资料",success:function(e){var o={};o.name=e.userInfo.nickName,o.avatarUrl=e.userInfo.avatarUrl,t.nameImg=o;var i={openId:a,headImgUrl:e.userInfo.avatarUrl,nickName:e.userInfo.nickName};console.log(i),t.$api.updateUser(i).then((function(e){console.log(e),200==e.code&&null!=e.data&&n.$setStorageSync("userData",JSON.stringify(e.data))})),t.$setStorageSync("userNameImg",JSON.stringify(o))}}):t.getToken()},logout:function(){var n=this;e.showModal({title:"提示",content:"确定退出登录吗?",success:function(t){t.confirm&&n.$api.logout().then((function(t){200==t.code&&(n.SET_CLEAR_STATE(),n.$removeStorageSync("token"),n.$removeStorageSync("login"),n.$removeStorageSync("userData"),n.$removeStorageSync("province"),n.$removeStorageSync("accountData"),n.$removeStorageSync("userNameImg"),n.userData=!1,n.nameImg={},n.teamInfo={},e.showToast({icon:"success",title:t.message}),n.getToken())}))}})},savePhone:function(n){var t=this;if(n){if(!t.$Reg.RegPhone(n))return void e.showToast({icon:"none",title:"请填写正确手机号"});t.setPhoneBind(n)}},setPhoneBind:function(n){var t=this,a={phone:n};t.$api.savePhone(a).then((function(n){console.log(n),200==n.code&&e.showToast({title:"手机号绑定成功~",icon:"none"})}))},getWxGroupByOpenId:function(){var e=this;e.$api.getWxGroupByOpenId().then((function(n){console.log("res",n),200==n.code&&(null!=n.data?(e.$setStorageSync("teamInfo",n.data),e.teamInfo=n.data):(e.$setStorageSync("teamInfo",""),e.$setStorageSync("teamModel","2"),e.teamInfo={}))}))},getPhoneNumber:function(n){console.log(n);var t=this,a=t.$getStorageSync("login");console.log(a),e.checkSession({success:function(){var o={openId:a.openid,unionId:a.unionid||"",sessionKey:a.session_key,encryptedData:n.detail.encryptedData,iv:n.detail.iv};t.$login(o,!1,!1).then((function(n){if(console.log(n),200==n.code){var a=t.$getStorageSync("userData");console.log(a),a&&(t.userData=JSON.parse(a),console.log(a),t.$getProvinceAll(),t.getWxGroupByOpenId())}else e.showToast({title:"授权失败,请重试~",icon:"none",duration:1500})}))},fail:function(){e.login({provider:"weixin",success:function(n){var a={code:n.code};t.$api.getOpenIdByCode(a).then((function(n){console.log(n),200==n.code?(t.$setStorageSync("token",n.data.openid),t.$setStorageSync("login",n.data)):e.showToast({title:"请重新授权~",icon:"none",duration:1500})}))}})}}),console.log("微信小程序")},hanldList:function(n){a.offline?e.showToast({icon:"none",title:"离线操作,无法进入",duration:1e3}):n.path&&e.navigateTo({url:n.path+"?pageId="+n.id})}})};n.default=u}).call(this,t("543d")["default"],t("c8ba"))},"1ba6":function(e,n,t){"use strict";(function(e){t("5e56");a(t("66fd"));var n=a(t("dd9f"));function a(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},"457f":function(e,n,t){},"7e85":function(e,n,t){"use strict";var a=t("457f"),o=t.n(a);o.a},"7ef9":function(e,n,t){"use strict";var a;t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return a}));var o=function(){var e=this,n=e.$createElement,t=(e._self._c,JSON.stringify(e.nameImg));e.$mp.data=Object.assign({},{$root:{g0:t}})},i=[]},dd9f:function(e,n,t){"use strict";t.r(n);var a=t("7ef9"),o=t("ee16");for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);t("7e85");var r,s=t("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"112054d0",null,!1,a["a"],r);n["default"]=c.exports},ee16:function(e,n,t){"use strict";t.r(n);var a=t("182d"),o=t.n(a);for(var i in a)"default"!==i&&function(e){t.d(n,e,(function(){return a[e]}))}(i);n["default"]=o.a}},[["1ba6","common/runtime","common/vendor"]]]);