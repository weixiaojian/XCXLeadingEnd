(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/waybill/index"],{"0071":function(t,e,a){"use strict";a.r(e);var n=a("e570"),i=a("c64e");for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("9bc38");var r,o=a("f0c5"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"321ff449",null,!1,n["a"],r);e["default"]=c.exports},4581:function(t,e,a){"use strict";(function(t){a("5e56");n(a("66fd"));var e=n(a("0071"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"665a":function(t,e,a){},7378:function(t,e,a){"use strict";(function(t){function a(t){return r(t)||s(t)||i(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(t,e):void 0}}function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function r(t){if(Array.isArray(t))return o(t)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c={data:function(){return{tab:[{name:"我寄的",id:0,total:0},{name:"我收的",id:1,total:0}],tabList:[{name:"全部",id:0,pageNum:1,pageSize:15,getMyOrdersList:[],endSuccess:!1,all_ck:!1,total:0,isSelectTime:!1},{name:"已揽收",id:1,pageNum:1,pageSize:15,getMyOrdersList:[],endSuccess:!1,all_ck:!1,total:0,isSelectTime:!1},{name:"在途",id:1,pageNum:1,pageSize:15,getMyOrdersList:[],endSuccess:!1,all_ck:!1,total:0,isSelectTime:!1},{name:"已派件",id:1,pageNum:1,pageSize:15,getMyOrdersList:[],endSuccess:!1,all_ck:!1,total:0,isSelectTime:!1},{name:"已签收",id:1,pageNum:1,pageSize:15,getMyOrdersList:[],endSuccess:!1,all_ck:!1,total:0,isSelectTime:!1}],tabIndex:0,expressSearch:"",boxStyle:{"border-radius":"50rpx"},mescroll:null,upOption:{auto:!1,page:{num:1,size:15},noMoreSize:5,empty:{use:!0,tip:"~ 暂无运单 ~"}},downOption:{use:!0,auto:!1},timeIndex:3,timeScreen:[{name:"全部",id:0,time:""},{name:"今天",id:1,time:""},{name:"近7天",id:2,time:""},{name:"近30天",id:3,time:""}],statusIndex:0,statusScreen:[{name:"全部",id:0,status:""},{name:"已揽收",id:1,status:"已揽收"},{name:"在途",id:2,status:"在途"},{name:"已派件",id:3,status:"已派件"},{name:"已签收",id:4,status:"已签收"}],isScreen:!1,endDate:"",startDate:"",before:"",after:"",statusVue:"",teamInfo:{},teamModel:""}},onShow:function(){var e=this,a=e.$getStorageSync("userData");if("undefined"==typeof a)return t.showModal({title:"提示",content:"请先登录授权~",success:function(e){e.confirm&&t.switchTab({url:"/pages/tabbar/my/index?pageId=send"})}}),!1;var n=this.$getStorageSync("token");n&&e.getWxGroupByOpenId();var i=e.$getStorageSync("teamInfo");i&&(e.teamInfo=i),e.teamModel="1"==e.$getStorageSync("teamModel")?"1":"2",wx.setNavigationBarTitle({title:"我的运单".concat("1"===e.$getStorageSync("teamModel")?"（团队）":"")}),this.mescroll.triggerDownScroll()},onLoad:function(){this.initDate()},methods:{confirm_search:function(){var t=this;t.mescroll.triggerDownScroll()},onTabTap:function(t){console.log(t);var e=this;this.tabIndex=t.id,this.statusIndex=t.id,e.statusVue=t.status,e.tabList[e.tabIndex].isSelectTime&&(e.tabList[e.tabIndex].pageNum=1,e.tabList[e.tabIndex].endSuccess=!1,e.mescroll.endByPage(15,e.tabList[e.tabIndex].total),e.mescroll.triggerDownScroll()),this.mescroll.triggerDownScroll()},bindBody:function(){var t=this;t.isScreen&&(t.confirmFilter(),t.isScreen=!1)},confirm:function(t){var e=this;e.tabList[e.tabIndex].endSuccess=!0,this.before=t.before,this.after=t.after,e.setSelectTime(),e.isScreen=!0},onScreen:function(){},confirmFilter:function(){var t=this;switch(t.tabList[t.tabIndex].pageNum=1,t.tabList[t.tabIndex].getMyOrdersList=[],t.timeIndex){case 0:this.before="",this.after="";break;case 1:this.before=this.$momm.getdate(),this.after=this.$momm.getdate();break;case 2:this.before=this.$momm.getdate(-7),this.after=this.$momm.getdate();break;case 3:this.before=this.$momm.getdate(-30),this.after=this.$momm.getdate();break;default:this.before=this.$momm.getdate(-30),this.after=this.$momm.getdate()}t.statusVue=t.statusScreen[t.statusIndex].status,console.log("status",t.statusScreen[t.statusIndex].status),t.isScreen=!1,t.mescroll.triggerDownScroll()},refreshFilter:function(){var t=this;t.statusVue="",t.statusIndex=0,t.timeIndex=3,t.before=this.$momm.getdate(-30),t.after=this.$momm.getdate()},getWxGroupByOpenId:function(){var t=this;t.$api.getWxGroupByOpenId().then((function(e){console.log("res",e),200==e.code&&null!=e.data?(t.$setStorageSync("teamInfo",e.data),t.teamInfo=e.data):t.$setStorageSync("teamInfo","")}))},setSelectTime:function(){var t=this;t.tabList.forEach((function(t){t.isSelectTime=!0}))},copy:function(e){t.setClipboardData({data:e,success:function(){console.log("success")}})},selectTime:function(){},getFilterData:function(){this.isScreen=!0},initDate:function(){this.before=this.$momm.getdate(-30),this.after=this.$momm.getdate()},goOrderDetails:function(e){var a={type:this.tabIndex,billCode:e.billCode,item:e};t.navigateTo({url:"/pages/order-details/index?pageId=ddcx&data="+JSON.stringify(a)})},clickTime:function(t,e){console.log(e),"time"==e?this.timeIndex=t:this.statusIndex=t},editOrders:function(e){console.log(e);var a={orderBill:e.orderBillCode};t.navigateTo({url:"/pages/order/send/index?pageId=ddcx&data="+JSON.stringify(a)})},inputVal:function(t){this.$nextTick((function(){this.expressSearch=t}))},search:function(){var t=this;t.mescroll.triggerDownScroll()},mescrollInit:function(t){this.mescroll=t},downCallback:function(t){this.tabList[this.tabIndex].pageNum=1,this.tabList[this.tabIndex].endSuccess=!1,t.resetUpScroll()},upCallback:function(t){var e=this,n=this;JSON.parse(this.$getStorageSync("userData"));console.log(this.before),console.log(this.after);var i={pageNum:this.tabList[this.tabIndex].pageNum,pageSize:this.tabList[this.tabIndex].pageSize,billCode:this.expressSearch,billStatus:this.statusVue,openId:this.$getStorageSync("token"),startDate:""!=this.before?this.before+" 00:00:00":"",endDate:""!=this.after?this.after+" 23:59:59":""};"1"==n.teamModel&&("3"!=n.teamInfo.status?(i.groupId=n.teamInfo.groupId,i.openId=""):(i.groupId=n.teamInfo.groupId,i.openId=n.teamInfo.openId)),this.$api.getMyWyBill(i).then((function(t){if(200==t.code){var i,s=t.data;console.log(s),1==e.tabList[e.tabIndex].pageNum&&(e.tabList[e.tabIndex].getMyOrdersList=[],e.tabList[e.tabIndex].pageNum=1),e.tabList[e.tabIndex].total=s.total,e.tabList[e.tabIndex].getMyOrdersList=(i=e.tabList[e.tabIndex].getMyOrdersList).concat.apply(i,a(s.data)),console.log(111,e.tabList[e.tabIndex].getMyOrdersList),e.tabList[e.tabIndex].pageNum++,s.data.length<e.tabList[e.tabIndex].pageSize&&(e.tabList[e.tabIndex].endSuccess=!0),n.mescroll.endByPage(s.data.length,s.total)}else e.mescroll.endErr()})).catch((function(){e.mescroll.endErr()}))}}};e.default=c}).call(this,a("543d")["default"])},"9bc38":function(t,e,a){"use strict";var n=a("665a"),i=a.n(n);i.a},c64e:function(t,e,a){"use strict";a.r(e);var n=a("7378"),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},e570:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return n}));var n={scrollViewTab:function(){return a.e("components/scroll-view-tab/scroll-view-tab").then(a.bind(null,"7316"))},mescrollUni:function(){return Promise.all([a.e("common/vendor"),a.e("components/mescroll-uni/mescroll-uni")]).then(a.bind(null,"acef"))}},i=function(){var t=this,e=t.$createElement;t._self._c},s=[]}},[["4581","common/runtime","common/vendor"]]]);