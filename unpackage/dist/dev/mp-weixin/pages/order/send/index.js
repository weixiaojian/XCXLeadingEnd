(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/order/send/index"],{

/***/ 86:
/*!*******************************************************************************************!*\
  !*** E:/idea-work/ztd/yunda/YDTCP_WeChat/main.js?{"page":"pages%2Forder%2Fsend%2Findex"} ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(createPage) {__webpack_require__(/*! uni-pages */ 5);
var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 2));
var _index = _interopRequireDefault(__webpack_require__(/*! ./pages/order/send/index.vue */ 87));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}
createPage(_index.default);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["createPage"]))

/***/ }),

/***/ 87:
/*!**********************************************************************!*\
  !*** E:/idea-work/ztd/yunda/YDTCP_WeChat/pages/order/send/index.vue ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index_vue_vue_type_template_id_fb1e2936_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.vue?vue&type=template&id=fb1e2936&scoped=true& */ 88);
/* harmony import */ var _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.vue?vue&type=script&lang=js& */ 90);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _index_vue_vue_type_style_index_0_id_fb1e2936_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index.vue?vue&type=style&index=0&id=fb1e2936&lang=scss&scoped=true& */ 92);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 11);

var renderjs





/* normalize component */

var component = Object(_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _index_vue_vue_type_template_id_fb1e2936_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"],
  _index_vue_vue_type_template_id_fb1e2936_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  "fb1e2936",
  null,
  false,
  _index_vue_vue_type_template_id_fb1e2936_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

component.options.__file = "pages/order/send/index.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 88:
/*!*****************************************************************************************************************!*\
  !*** E:/idea-work/ztd/yunda/YDTCP_WeChat/pages/order/send/index.vue?vue&type=template&id=fb1e2936&scoped=true& ***!
  \*****************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_fb1e2936_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=fb1e2936&scoped=true& */ 89);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_fb1e2936_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_fb1e2936_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_fb1e2936_scoped_true___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_fb1e2936_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),

/***/ 89:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/idea-work/ztd/yunda/YDTCP_WeChat/pages/order/send/index.vue?vue&type=template&id=fb1e2936&scoped=true& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
try {
  components = {
    uniPopup: function() {
      return __webpack_require__.e(/*! import() | components/uni-popup/uni-popup */ "components/uni-popup/uni-popup").then(__webpack_require__.bind(null, /*! @/components/uni-popup/uni-popup.vue */ 399))
    }
  }
} catch (e) {
  if (
    e.message.indexOf("Cannot find module") !== -1 &&
    e.message.indexOf(".vue") !== -1
  ) {
    console.error(e.message)
    console.error("1. 排查组件名称拼写是否正确")
    console.error(
      "2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"
    )
    console.error(
      "3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件"
    )
  } else {
    throw e
  }
}
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 90:
/*!***********************************************************************************************!*\
  !*** E:/idea-work/ztd/yunda/YDTCP_WeChat/pages/order/send/index.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */ 91);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 91:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/idea-work/ztd/yunda/YDTCP_WeChat/pages/order/send/index.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(uni) {Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;
































































































































var _QRPrinterAndTest = _interopRequireDefault(__webpack_require__(/*! @/common/wxQRPrinter/QRPrinterAndTest.js */ 43));
var _printTpl = _interopRequireDefault(__webpack_require__(/*! @/common/wxQRPrinter/utils/printTpl.js */ 65));
var _printTpl_parsing = _interopRequireDefault(__webpack_require__(/*! @/common/wxQRPrinter/utils/printTpl_parsing.js */ 66));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}var SendReceive = function SendReceive() {__webpack_require__.e(/*! require.ensure | pages/order/components/send-receive/index */ "pages/order/components/send-receive/index").then((function () {return resolve(__webpack_require__(/*! ../components/send-receive/index.vue */ 434));}).bind(null, __webpack_require__)).catch(__webpack_require__.oe);};var GoodsInfo = function GoodsInfo() {__webpack_require__.e(/*! require.ensure | pages/order/components/goods-info/index */ "pages/order/components/goods-info/index").then((function () {return resolve(__webpack_require__(/*! ../components/goods-info/index.vue */ 441));}).bind(null, __webpack_require__)).catch(__webpack_require__.oe);};var ExpectTime = function ExpectTime() {__webpack_require__.e(/*! require.ensure | pages/order/components/expectTime/index */ "pages/order/components/expectTime/index").then((function () {return resolve(__webpack_require__(/*! ../components/expectTime/index.vue */ 448));}).bind(null, __webpack_require__)).catch(__webpack_require__.oe);};var Agreement = function Agreement() {__webpack_require__.e(/*! require.ensure | pages/order/components/agreement/index */ "pages/order/components/agreement/index").then((function () {return resolve(__webpack_require__(/*! ../components/agreement/index.vue */ 455));}).bind(null, __webpack_require__)).catch(__webpack_require__.oe);};var BlePop = function BlePop() {__webpack_require__.e(/*! require.ensure | components/ble-pop/ble-pop */ "components/ble-pop/ble-pop").then((function () {return resolve(__webpack_require__(/*! @/components/ble-pop/ble-pop.vue */ 420));}).bind(null, __webpack_require__)).catch(__webpack_require__.oe);};var YDTOAST = function YDTOAST() {__webpack_require__.e(/*! require.ensure | components/yd-toast/yd-toast */ "components/yd-toast/yd-toast").then((function () {return resolve(__webpack_require__(/*! @/components/yd-toast/yd-toast.vue */ 20));}).bind(null, __webpack_require__)).catch(__webpack_require__.oe);};

//提示框
var self,timer = null;var _default =
{
  data: function data() {
    return {
      addressDataJJ: {},
      addressDataSJ: {},
      realName: false,
      hasTips: false,
      optionType: '',
      newaddressId: '', //新增地址收寄件人
      tabIndex: 0,
      goodsInfo: { //物品&增值信息
        goodsWeight: 1,
        goodsName: '',
        goodsType: '',
        packingPiece: '',
        remark: '',
        goodsPayment: 0,
        insuredValue: '',
        blSpecial: 0 },

      freight: '0', //运费
      topayment: '0', //到付
      agree: true, //同意协议
      pageId: '', //页面标识
      specEmployee: '',
      specEmployeeCode: '',
      ownerSite: '',
      ownerSiteCode: '',
      isEdit: false,
      isAgain: false,
      editData: {},
      isCash: true,
      customerDeliveryBeginTime: '',
      customerDeliveryEndTime: '',
      prePageData: null,
      titleX: '下单',
      changeList: [
      {
        icon: __webpack_require__(/*! @/static/img/zaitu.png */ 53),
        name: '下单',
        currentIndex: 0 },
      {
        icon: __webpack_require__(/*! @/static/img/dayinji.png */ 55),
        name: '下单并打印',
        currentIndex: 1 }],


      currentKey: 0,
      orderBill: '',
      teamModel: '',
      editTeamInfo: {
        groupId: '',
        groupMember: '',
        sendSite: '',
        sendSiteCode: '',
        customerCode: '',
        customerName: '' },

      userData: {},
      monthly: {
        customerCode: '',
        customerName: '' },

      smartObj: {
        name: '',
        phone: '',
        company: '',
        provice: '',
        city: '',
        country: '',
        townName: '',
        detailAddress: '' },
      //剪切板数据回写
      isCopyText: '',
      disable: false };

  },
  components: {
    SendReceive: SendReceive,
    GoodsInfo: GoodsInfo,
    ExpectTime: ExpectTime,
    Agreement: Agreement,
    BlePop: BlePop,
    YDTOAST: YDTOAST },

  onShow: function onShow() {
    var self = this;
    // 如果寄件电话存在则调用
    if (this.addressDataJJ.phone) {
      console.log('realName');
      self.blurValue();
    }
    var sendOrder;
    try {
      sendOrder = JSON.parse(self.$getStorageSync('sendOrder'));
    } catch (err) {
      console.log(err);
    }
    var tempFlog;
    tempFlog = sendOrder ? Object.keys(sendOrder.addressDataJJ).length == 0 : true;
    if (Object.keys(self.addressDataJJ).length == 0 && !self.isEdit && !self.isAgain && tempFlog) {
      self.getAddressDefault();
    }
  },
  onLoad: function onLoad(options) {
    var self = this;
    var userData = self.$getStorageSync('userData');
    if (typeof userData == "undefined") {
      uni.showModal({
        title: "提示",
        content: "请先登录授权~",
        success: function success(res) {
          if (res.confirm) {
            uni.switchTab({
              url: "/pages/tabbar/my/index?pageId=send" });

          } else if (res.cancel) {
            uni.switchTab({
              url: "/pages/tabbar/home/index?pageId=send" });

          }
        } });

      return false;
    }
    try {
      self.userData = JSON.parse(userData);
    } catch (err) {
      console.log(err);
    }
    if (options.q) {
      var ewmDataStr = decodeURIComponent(options.q);
      console.log('ewmDataStrD', ewmDataStr);
      var index = ewmDataStr.indexOf("scanOrder/");
      ewmDataStr = ewmDataStr.substring(index + 10, ewmDataStr.length);
      console.log(ewmDataStr);
      self.checkBillCode(ewmDataStr);
    }
    // let _data = JSON.parse(options.data)
    var _data;
    try {
      _data = JSON.parse(options.data);
    } catch (err) {
      console.log(err);
    }
    if (options.data != '{}' && options.data != undefined && options.data != '') {
      self.prePageData = _data;
      // 有订单号为修改订单
      var isBill = _data.orderBill ? _data.orderBill : false;
      if (isBill) {
        console.log(_data);
        if (_data.operatType == 'edit') {
          self.isEdit = true;
          self.getOrderData(_data.orderBill);
        } else {
          self.isAgain = true;
          self.getOrderData(_data.orderBill);
        }

      } else {
        self.$nextTick(function () {
          self.specEmployee = _data.specEmployeeName;
          self.specEmployeeCode = _data.specEmployeeCode;
          self.ownerSite = _data.ownerSite;
          self.ownerSiteCode = _data.ownerSiteCode;;
        });
      }
    }
    self.teamModel = self.$getStorageSync('teamModel') == '1' ? '1' : '2';
    wx.setNavigationBarTitle({
      title: "\u4E0B\u5355\u5BC4\u4EF6".concat(self.$getStorageSync('teamModel') === '1' ? '（团队）' : '') });

    var teamInfo = self.$getStorageSync('teamInfo');
    console.log('teamInfo', teamInfo);
    var isTeam = teamInfo ? teamInfo.groupId : false;
    if (self.teamModel != '1' && !self.userData.customerCode && !self.isEdit && !self.isAgain) {
      if (isTeam) {
        uni.showModal({
          title: "提示",
          content: "请选择团队模式下单",
          success: function success(res) {
            if (res.confirm) {
              uni.switchTab({
                url: "/pages/tabbar/home/index?pageId=send" });

            } else if (res.cancel) {
              self.disable = true;
            }
          } });

        return false;
      } else {
        uni.showModal({
          title: "提示",
          content: "是否有合作网点，如有请绑定月结客户编码再下单。",
          success: function success(res) {
            if (res.confirm) {
              uni.navigateTo({
                url: "/pages/bind-monthly/index?pageId=send" });

            } else if (res.cancel) {

            }
          } });

        return false;
      }
    }
    if (!self.isEdit && !self.isAgain) {
      self.getClipboard();
    }
  },
  beforeDestroy: function beforeDestroy() {
    //缓存页面数
    this.setStorageData();
  },
  onHide: function onHide() {
    //缓存页面数
    this.setStorageData();
  },
  mounted: function mounted() {
    var self = this;
    uni.$on('selectAddress', function (address) {
      console.log(address);
      if (self.tabIndex == '0') {
        self.addressDataJJ = address;
        self.blurValue();
      } else if (self.tabIndex == '1') {
        self.addressDataSJ = address;
      }
    });
    uni.$on('packageinfo', function (info) {
      console.log(info);
      self.goodsInfo.goodsWeight = info.goodsWeight;
      self.goodsInfo.goodsName = info.goodsName;
      self.goodsInfo.goodsType = info.goodsType;
      self.goodsInfo.packingPiece = info.packingPiece;
      self.goodsInfo.remark = info.remark;
      // self.getTrackFreight()
    });
    uni.$on('addedservices', function (info) {
      self.goodsInfo.goodsPayment = info.goodsPayment;
      self.goodsInfo.insuredValue = info.insuredValue;
      self.goodsInfo.blSpecial = info.blSpecial;
    });
    uni.$on('inputAddress', function (address) {
      if (self.newaddressId == 'jjr') {
        self.addressDataJJ = address;
      } else if (self.newaddressId == 'sjr') {
        self.addressDataSJ = address;
      }
    });
    // uni.$on('bleOk',bleOk =>{
    // 	if(bleOk){
    // 		this.$refs.showpopup3.close();
    // 		setTimeout(()=>{
    // 			this.getOrderPrint(self.orderBill)
    // 		},500)
    // 	}
    // });
    self.echoOrderData();
    self.$nextTick(function () {
      // self.getTrackFreight()
      var billFlog = self.prePageData ? self.prePageData.billCode : false;
      if (billFlog) {
        self.$refs.GoodsInfo.billCode = self.prePageData.billCode;
      }
      if (self.teamModel != '1' && self.userData.customerCode) {
        self.$refs.GoodsInfo.payment_type = '月结';
      }
    });
    self.blurValue();
  },

  onUnload: function onUnload() {
    uni.$off('selectAddress'); //关闭监听
    uni.$off('packageinfo'); //关闭监听
    uni.$off('addedservices'); //关闭监听
    uni.$off('inputAddress'); //关闭监听
    // uni.$off('bleOk');
  },
  watch: {
    dayItem: function dayItem(val, oldVal) {//普通的watch监听
      this.hourList = [];
      val == 1 ? this.hourList = this.hourMould : this.computerToday();
    } },

  methods: {
    //选项信息页面
    showPopup: function showPopup(type) {
      console.log(type);
      var data = {};
      data.type = type;
      if (type == 'wpxx') {
        data.item = {
          goodsName: this.goodsInfo.goodsName,
          remark: this.goodsInfo.remark,
          goodsWeight: this.goodsInfo.goodsWeight,
          packingPiece: this.goodsInfo.packingPiece };

        uni.navigateTo({
          url: "/pages/order/packageinfo/index?pageId=send&data=" + JSON.stringify(data) });

      } else {
        data.item = {
          goodsPayment: this.goodsInfo.goodsPayment,
          insuredValue: this.goodsInfo.insuredValue,
          blSpecial: this.goodsInfo.blSpecial };

        uni.navigateTo({
          url: "/pages/order/addedservices/index?pageId=send&data=" + JSON.stringify(data) });

      }
    },
    //快递服务协议
    goRead: function goRead() {
      var self = this;
      self.$refs['showpopup1'].open();
    },
    confirmAgreement: function confirmAgreement() {
      var self = this;
      self.$refs['showpopup1'].close();
      self.agree = true;
    },
    // 查询运费
    getTrackFreight: function getTrackFreight() {
      var self = this;
      var sendCity = self.addressDataJJ ? self.addressDataJJ.city : '';
      var acceptProvice = self.addressDataSJ ? self.addressDataSJ.provice : '';
      var acceptCity = self.addressDataSJ ? self.addressDataSJ.city : '';
      var acceptCountry = self.addressDataSJ ? self.addressDataSJ.country : '';
      var goodsWeight = self.goodsInfo.goodsWeight ? self.goodsInfo.goodsWeight : '';
      if (sendCity && acceptProvice && acceptCity && acceptCountry && goodsWeight) {
        var _data = {
          "sendCity": sendCity,
          "acceptProvince": acceptProvice,
          "acceptCity": acceptCity,
          "acceptCounty": acceptCountry,
          "goodsWeight": goodsWeight };

        self.$api.trackFreight(_data).then(function (res) {
          if (self.$refs.GoodsInfo.payment_type == '现金') {
            self.freight = res.data + '';
            self.topayment = '0';
            isCash: true;
          } else if (self.$refs.GoodsInfo.payment_type == '到付') {
            self.topayment = res.data + ''; //到付
            self.freight = '0';
            isCash: false;
          } else {
            self.freight = res.data + '';
            self.topayment = '0';
            isCash: true;
          }
        });
      }
    },
    getPaymentType: function getPaymentType(e) {
      var self = this;
      console.log(e);
      self.isCash = e == '现金' ? true : false;
      // self.getTrackFreight()
    },
    //选择预约时间
    selectExpectTime: function selectExpectTime() {
      var self = this;
      self.$refs['showpopup'].open();
    },
    getExpectTime: function getExpectTime(data) {
      var self = this;
      self.$refs.GoodsInfo.expectTime = data.dayItem + ' ' + data.hour;
      if (data.dayItem == '今天') {
        self.customerDeliveryBeginTime = self.$momm.getdate() + ' ' + data.hour.split('-')[0] + ':00';
        self.customerDeliveryEndTime = self.$momm.getdate() + ' ' + data.hour.split('-')[1] + ':00';
      } else if (data.dayItem == '明天') {
        self.customerDeliveryBeginTime = self.$momm.getdate(1) + ' ' + data.hour.split('-')[0] + ':00';
        self.customerDeliveryEndTime = self.$momm.getdate(1) + ' ' + data.hour.split('-')[1] + ':00';
      }
      self.$refs['showpopup'].close();
    },
    timeCancel: function timeCancel() {
      var self = this;
      self.$refs['showpopup'].close();
    },
    // 更改专属员工
    editMycourier: function editMycourier() {
      uni.navigateTo({
        url: "/pages/mycourier/index?pageId=send" });

    },
    blurValue: function blurValue() {
      var self = this;
      var phone = this.addressDataJJ ? this.addressDataJJ.phone : false;
      if (phone) {
        var data = { phone: this.addressDataJJ.phone };
        self.$getByPhone(data).then(function (res) {
          console.log(res);
          self.realName = res;
          self.hasTips = !res;
        });
      }
    },
    getAddressDefault: function getAddressDefault() {var _this = this;
      var self = this;
      self.$api.getAddressDefault().then(function (res) {
        if (res.code == 200 && res.data != null) {
          self.addressDataJJ = res.data;
          _this.$forceUpdate();
          self.blurValue();
        }
      });
    },
    //实名认证
    realnameMethod: function realnameMethod() {
      var data = { phone: this.addressDataJJ.phone };
      uni.navigateTo({
        url: "/pages/myrealname/index?data=" + JSON.stringify(data) });

    },
    // 扫描获取运单号
    getBillCode: function getBillCode() {
      var self = this;
      uni.scanCode({
        success: function success(res) {
          var ewmDataStr = res.result;
          // let ewmDataStr ='http://m23j177109.iok.la:34152/NZXCXServer/scanOrder/NZ0000123';
          var index = ewmDataStr.indexOf("scanOrder/");
          ewmDataStr = ewmDataStr.substring(index + 10, ewmDataStr.length);
          self.checkBillCode(ewmDataStr);
        } });

    },
    checkBillCode: function checkBillCode(data) {
      var self = this;
      var _data = {
        billCode: data };

      self.$api.checkBillCode(_data).then(function (res) {
        if (res.code == 200) {
          // if(self.prePageData){
          // 	self.prePageData.billCode=res.data
          // }
          self.$refs.GoodsInfo.billCode = res.data;
        } else {
          uni.showToast({ icon: "none", title: '该运单号已使用！', duration: 2000 });
        }
      });
    },
    // 获取运单数据
    getOrderData: function getOrderData(orderCode) {
      var self = this;
      var _data = {
        orderBill: orderCode };

      self.$api.getOrderData(_data).then(function (res) {
        console.log(res);
        if (res.code == 200) {
          self.editData = res.data;
          self.echoOrderData();
        } else {
          uni.showToast({
            icon: "none",
            title: "订单数据获取失败~",
            duration: 1500,
            mask: true });

          setTimeout(function () {
            uni.navigateBack({
              delta: 1 });

          }, 1000);
        }
      });
    },
    myaddress: function myaddress(obj) {
      this.tabIndex = obj.tabIndex;
      uni.navigateTo({
        url: "/pages/myaddress/index?pageId=send&data=" + JSON.stringify(obj) });

    },
    // 进入新增地址簿
    newaddress: function newaddress(pageId) {
      var data = { type: 'send' };
      this.newaddressId = pageId;
      if (pageId == 'jjr') {
        data.item = this.addressDataJJ;
      } else if (pageId == 'sjr') {
        data.item = this.addressDataSJ;
      }
      data.isEdit = this.isEdit ? this.isEdit : this.isAgain;
      uni.navigateTo({
        url: "/pages/newaddress/index?pageId=" + pageId + "&data=" + JSON.stringify(data) });

    },
    checkboxChange: function checkboxChange(e) {
      this.agree = e.detail.value == 'agree' ? true : false;
    },

    // 更改偏好类型
    changeSub: function changeSub() {
      this.$refs['showpopup2'].open();
    },

    // 点击绘制
    showModalChange: function showModalChange(item) {var _this2 = this;
      if (item.name == '下单并打印') {
        _QRPrinterAndTest.default.getConnectState(function (res) {
          _this2.xiaChange(item);
        }, function (err) {});
      } else {
        this.xiaChange(item);
      }
      this.$refs['showpopup2'].close();
    },

    xiaChange: function xiaChange(item) {
      this.titleX = item.name;
      this.currentKey = item.currentIndex;
    },
    editAddr: function editAddr(type) {
      var self = this;
      if (type == 'jjr') {
        self.addressDataJJ = self.smartObj;
      } else {
        self.addressDataSJ = self.smartObj;
      }
      console.log(self.addressDataSJ);
      self.$refs.showpopup4.close();
    },
    //获取剪切板内容
    getClipboard: function getClipboard() {
      var self = this;
      uni.getClipboardData({
        success: function success(res) {
          // console.log(res);
          if (res.data != null && res.data != undefined && self.$Reg.removeHTMLTag(res.data) != '' && res.data.trim() != '') {
            if (self.$getStorageSync('clipboardData')) {
              if (res.data == self.$getStorageSync('clipboardData')) {
                return;
              }
            }
            self.$setStorageSync('clipboardData', self.$Reg.removeHTMLTag(res.data));
            self.isCopyText = self.$Reg.stripscript(self.$Reg.removeHTMLTag(res.data));
            if (self.isCopyText) {
              self.analysis();
            }
          }
        },
        complete: function complete() {
          uni.hideToast({}); //隐藏默认
        } });

    },
    analysis: function analysis() {
      var self = this;
      var Data_ = {
        address: self.isCopyText };

      self.$api.addressAnalysis(Data_).then(function (res) {
        if (res.code == 200) {
          self.smartObj.name = res.data.name || '';
          self.smartObj.phone = res.data.phone || '';
          self.smartObj.detailAddress = res.data.formatAddress || '';
          if (res.data.province || res.data.cityName || res.data.countyName) {
            var _data = {
              province: res.data.province || '',
              city: res.data.cityName || '',
              county: res.data.countyName || '',
              town: res.data.townName || '' };

            return self.$api.checkProvince(_data);
          } else {
            return Promise.reject();
          }
        } else {
          Promise.reject();
          // uni.showToast({icon:"none",title:res.message,duration:2000});
        }
      }).then(function (res) {
        if (res.code == 200) {
          self.$refs.showpopup4.open();
          var townName = res.data.townName ? '/' + res.data.townName : '';
          var townCode = res.data.townCode ? '/' + res.data.townCode : '';
          self.smartObj.provice = res.data.province || '';
          self.smartObj.city = res.data.cityName || '';
          self.smartObj.country = res.data.countyName || '';
          self.smartObj.townName = townName || '';
          console.log(self.smartObj);
        } else if (res.code == 400) {
          uni.showToast({ icon: "none", title: res.message, duration: 2000 });
        }
      }, function (error) {
        console.log(error);
      });
    },
    // 订单提交
    submit: function submit() {var _this3 = this;
      var self = this;
      if (self.disable) {return;}
      var teamInfo = self.$getStorageSync('teamInfo');
      if (this.addressDataJJ.name == '' || this.addressDataJJ.name == undefined || this.addressDataJJ.
      name == null) {
        uni.showToast({
          icon: "none",
          title: "请填写寄件人信息" });

        return;
      };
      if (this.addressDataSJ.name == '' || this.addressDataSJ.name == undefined || this.addressDataSJ.
      name == null) {
        uni.showToast({
          icon: "none",
          title: "请填写收件人信息" });

        return;
      };
      if (self.addressDataJJ.name == '') {uni.showToast({ icon: "none", title: "完善寄件人姓名" });return;};
      if (self.addressDataJJ.phone == '') {uni.showToast({ icon: "none", title: "完善寄件人手机号" });return;};
      if (self.addressDataJJ.provice == '' || self.addressDataJJ.city == '' || self.addressDataJJ.country == '') {uni.showToast({ icon: "none", title: "完善寄件人省市区" });return;};
      if (self.addressDataJJ.detailAddress == '') {uni.showToast({ icon: "none", title: "完善寄件人详细地址" });return;};
      if (self.addressDataSJ.name == '') {uni.showToast({ icon: "none", title: "完善收件人姓名" });return;};
      if (self.addressDataSJ.phone == '') {uni.showToast({ icon: "none", title: "完善收件人手机号" });return;};
      if (self.addressDataSJ.provice == '' || self.addressDataSJ.city == '' || self.addressDataSJ.country == '') {uni.showToast({ icon: "none", title: "完善收件人省市区" });return;};
      if (self.addressDataSJ.detailAddress == '') {uni.showToast({ icon: "none", title: "完善收件人详细地址" });return;};
      if (!this.realName) {
        uni.showToast({
          icon: "none",
          title: "请先进行实名认证" });

        return;
      };
      if (this.goodsInfo.goodsWeight == '') {
        uni.showToast({
          icon: "none",
          title: "请填写重量信息" });

        return;
      };
      if (this.goodsInfo.goodsName == '') {
        uni.showToast({
          icon: "none",
          title: "请填写物品名称" });

        return;
      };
      if (this.$refs.GoodsInfo.payment_type == '') {
        uni.showToast({
          icon: "none",
          title: "请填写付款方式" });

        return;
      };
      if (!this.agree) {
        uni.showToast({
          icon: "none",
          title: "请勾选快递协议" });

        return;
      };
      if (timer != null) {
        clearTimeout(timer);
      }
      if (self.isEdit) {
        if (self.addressDataJJ.provice != self.editData.sendProvince) {uni.showToast({ icon: "none", title: "寄件人省份无法修改" });return;}
        if (self.addressDataSJ.provice != self.editData.acceptProvince) {uni.showToast({ icon: "none", title: "收件人省份无法修改" });return;}
      }
      var data = {
        sendMan: this.addressDataJJ.name,
        sendManMobile: this.addressDataJJ.phone,
        sendCountry: '中国',
        sendProvince: this.addressDataJJ.provice,
        sendCity: this.addressDataJJ.city,
        sendCounty: this.addressDataJJ.country,
        sendTown: this.addressDataJJ.townName,
        sendManCompany: this.addressDataJJ.company,
        sendManAddress: this.addressDataJJ.detailAddress,
        acceptMan: this.addressDataSJ.name,
        acceptManMobile: this.addressDataSJ.phone,
        acceptCountry: '中国',
        acceptProvince: this.addressDataSJ.provice,
        acceptCity: this.addressDataSJ.city,
        acceptCounty: this.addressDataSJ.country,
        acceptTown: this.addressDataSJ.townName,
        acceptManCompany: this.addressDataSJ.company,
        acceptManAddress: this.addressDataSJ.detailAddress,
        billCode: this.$refs.GoodsInfo.billCode,
        freight: parseInt(this.freight),
        topayment: parseInt(this.topayment),
        goodsPayment: this.goodsInfo.goodsPayment,
        insuredValue: this.goodsInfo.insuredValue == '' ? 0 : this.goodsInfo.insuredValue,
        blSpecial: this.goodsInfo.blSpecial,
        goodsName: this.goodsInfo.goodsName,
        goodsType: this.goodsInfo.goodsType,
        paymentType: this.$refs.GoodsInfo.payment_type,
        packingPiece: this.goodsInfo.packingPiece,
        customerDeliveryBeginTime: this.customerDeliveryBeginTime,
        customerDeliveryEndTime: this.customerDeliveryEndTime,
        remark: this.goodsInfo.remark,
        recMan: this.specEmployee || '',
        recManCode: this.specEmployeeCode || '',
        sendSite: this.ownerSite || '',
        sendSiteCode: this.ownerSiteCode || '',
        goodsWeight: this.goodsInfo.goodsWeight,
        dataFrom: '微信' };

      if (self.isEdit) {
        data.openId = self.editData.openId;
        data.orderBill = self.editData.orderBill;
        data.groupId = self.editTeamInfo.groupId;
        data.groupMember = self.editTeamInfo.groupMember;
        data.sendSite = self.editTeamInfo.sendSite || teamInfo.siteName;
        data.sendSiteCode = self.editTeamInfo.sendSiteCode || teamInfo.siteCode;
        if (self.editTeamInfo.groupId) {
          data.customerCode = self.editTeamInfo.customerCode;
          data.customerName = self.editTeamInfo.customerName;
        } else {
          data.customerCode = self.monthly.customerCode;
          data.customerName = self.monthly.customerName;
        }
        this.$api.editBill(data).then(function (res) {
          if (res.code == 200) {
            uni.showToast({
              icon: "success",
              title: res.message,
              duration: 5000 });

            self.reset_order();
            self.jumpSwitchTab(0);
          }
        });
      } else {
        data.openId = self.$getStorageSync('token');
        // this.currentKey
        if (self.teamModel == '1') {
          data.groupId = teamInfo.groupId;
          data.groupMember = teamInfo.nickName;
          data.sendSite = teamInfo.siteName;
          data.sendSiteCode = teamInfo.siteCode;
          data.customerCode = teamInfo.customerCode;
          data.customerName = teamInfo.customerName;
        } else {
          if (self.userData.customerCode) {
            data.customerCode = self.userData.customerCode;
            data.customerName = self.userData.customerName;
          }
        }
        timer = setTimeout(function () {
          _this3.$api.saveBill(data).then(function (res) {
            console.log(res);
            if (res.code == 200) {
              var orderBill = res.data;
              self.orderBill = res.data;
              uni.showToast({
                icon: "none",
                title: res.message,
                duration: 3000 });

              self.reset_order();
              if (self.titleX == '下单') {
                self.jumpSwitchTab(0);
              } else {
                self.getOrderPrint(orderBill);
              }
            } else if (res.code == 400) {
              _this3.$refs.ydToast.show({ title: res.message });
            }
          });
        }, 1000);
      }
    },
    getOrderPrint: function getOrderPrint(obj) {var _this4 = this;
      var self = this;
      var _data = {
        orderBill: obj };

      _QRPrinterAndTest.default.getConnectState(function (ress) {
        if (ress.state && ress.code == 200) {
          // 连接成功直接打印
          self.$api.getOrderPrint(_data).then(function (res) {
            console.log(res);
            if (res.code == 200 && res.data.length > 0) {
              // 先要获取蓝牙的连接状态
              res.data.forEach(function (item, index) {
                var sublist = [];
                sublist.push(item.billCode);
                if (item.pieceNumber > 1 && item.billCodeSub1) {
                  var arr = item.billCodeSub1.split(';').filter(function (item) {return item != '';});
                  sublist = sublist.concat(arr);
                }
                sublist.forEach(function (subItem, index) {
                  item.billCode = subItem;
                  var buffs = (0, _printTpl_parsing.default)(_printTpl.default['韵达同城联'], item);
                  var prints = buffs.join('');
                  _QRPrinterAndTest.default.sendCmd(prints);
                });
              });
              _data.blPrint = 1;
              return _this4.$api.updateBlPrint(_data);
              _this4.orderBill = '';
              self.reset_order();
            } else {
              self.reset_order();
              self.jumpSwitchTab(0);
              Promise.reject();
            }
          }).then(function (res) {
            if (res.code == 200) {
              console.log(res.message);
            } else {
              wx.showToast({
                title: res.message,
                icon: 'none',
                duration: 2000 });

            }
          });
        }
      }, function (err) {
        self.reset_order();
        // uni.navigateTo({ url: '/pages/myPrinter/myPrinter?pageId=xddy'})
        // 否则进入蓝牙连接的弹窗
        // this.$refs.showpopup3.open()
      });

    },
    // 跳转到订单页面
    jumpSwitchTab: function jumpSwitchTab(num) {
      /**
                                                 *  num: 0 待打印  1 已打印
                                                 */
      getApp().globalData.currentIndex = num;
      uni.switchTab({
        url: '/pages/tabbar/inquire/index' });

    },

    reset_order: function reset_order() {
      this.$refs.GoodsInfo.billCode = '';
      this.addressDataJJ = {};
      this.addressDataSJ = {};
      this.freight = '0';
      this.topayment = '0';
      this.goodsInfo.goodsPayment = 0;
      this.goodsInfo.insuredValue = '';
      this.goodsInfo.blSpecial = '';
      this.specEmployee = '';
      this.specEmployeeCode = '';
      this.ownerSiteCode = '';
      this.ownerSite = '';
      this.customerDeliveryBeginTime = '';
      this.customerDeliveryEndTime = '';
      // let _data = {};
      // this.goodsInfo.goodsName = '';
      // this.goodsInfo.goodsType = '';
      // this.$refs.GoodsInfo.payment_type = '现金';
      // this.goodsInfo.packingPiece = '';
      // this.goodsInfo.remark = '';
      // this.goodsInfo.goodsWeight = 0;
      this.$setStorageSync('sendOrder', {});
    },
    echoOrderData: function echoOrderData() {
      var self = this;
      var sendOrder;
      try {
        sendOrder = JSON.parse(this.$getStorageSync('sendOrder'));
      } catch (err) {
        console.log(err);
      }
      console.log(sendOrder);
      if (sendOrder || this.isEdit || this.isAgain) {
        if (JSON.stringify(this.editData) != '{}') {var _this$editData =




































          this.editData,sendMan = _this$editData.sendMan,sendManMobile = _this$editData.sendManMobile,sendProvince = _this$editData.sendProvince,sendCity = _this$editData.sendCity,sendCounty = _this$editData.sendCounty,sendManCompany = _this$editData.sendManCompany,sendManAddress = _this$editData.sendManAddress,acceptMan = _this$editData.acceptMan,acceptManMobile = _this$editData.acceptManMobile,acceptProvince = _this$editData.acceptProvince,acceptCity = _this$editData.acceptCity,acceptCounty = _this$editData.acceptCounty,acceptManCompany = _this$editData.acceptManCompany,acceptManAddress = _this$editData.acceptManAddress,freight = _this$editData.freight,topayment = _this$editData.topayment,sendSite = _this$editData.sendSite,sendSiteCode = _this$editData.sendSiteCode,recMan = _this$editData.recMan,recManCode = _this$editData.recManCode,goodsPayment = _this$editData.goodsPayment,insuredValue = _this$editData.insuredValue,blSpecial = _this$editData.blSpecial,goodsName = _this$editData.goodsName,goodsType = _this$editData.goodsType,paymentType = _this$editData.paymentType,packingPiece = _this$editData.packingPiece,remark = _this$editData.remark,goodsWeight = _this$editData.goodsWeight,customerDeliveryBeginTime = _this$editData.customerDeliveryBeginTime,customerDeliveryEndTime = _this$editData.customerDeliveryEndTime,groupId = _this$editData.groupId,groupMember = _this$editData.groupMember,customerCode = _this$editData.customerCode,customerName = _this$editData.customerName;
          var billCode = this.editData.billCode ? this.editData.billCode : '';
          self.addressDataJJ = {
            provice: sendProvince,
            city: sendCity,
            country: sendCounty,
            detailAddress: sendManAddress,
            name: sendMan,
            phone: sendManMobile,
            company: sendManCompany };

          self.addressDataSJ = {
            provice: acceptProvince,
            city: acceptCity,
            country: acceptCounty,
            detailAddress: acceptManAddress,
            name: acceptMan,
            phone: acceptManMobile,
            company: acceptManCompany };

          self.$nextTick(function () {
            this.$refs.GoodsInfo.billCode = this.isEdit ? billCode : '';
            // this.freight = freight||'';
            // this.topayment = topayment||'';
            this.goodsInfo.goodsPayment = goodsPayment || 0;
            this.goodsInfo.insuredValue = insuredValue || '';
            this.goodsInfo.blSpecial = blSpecial || 0;
            this.goodsInfo.goodsName = goodsName || '';
            this.goodsInfo.goodsType = goodsType || '';
            this.$refs.GoodsInfo.payment_type = paymentType || '';
            this.goodsInfo.packingPiece = packingPiece || '';
            this.goodsInfo.remark = remark || '';
            this.goodsInfo.goodsWeight = goodsWeight || 0;
            this.specEmployee = recMan || '';
            this.specEmployeeCode = recManCode || '';
            this.ownerSite = sendSite || '';
            this.ownerSiteCode = sendSiteCode || '';
            this.freight = freight ? freight + '' : '0';
            this.topayment = topayment ? topayment + '' : '0';
            this.customerDeliveryBeginTime = customerDeliveryBeginTime || '';
            this.customerDeliveryEndTime = customerDeliveryEndTime || '';
            this.isCash = paymentType == '现金' ? true : false;
            this.editTeamInfo.groupId = groupId || '';
            this.editTeamInfo.groupMember = groupMember || '';
            this.editTeamInfo.sendSite = sendSite || '';
            this.editTeamInfo.sendSiteCode = sendSiteCode || '';
            if (groupId) {
              this.editTeamInfo.customerCode = customerCode || '';
              this.editTeamInfo.customerName = customerName || '';
            } else {
              this.monthly.customerCode = customerCode || '',
              this.monthly.customerName = customerName || '';
            }
            console.log('echo', this.editTeamInfo);
            if (customerDeliveryBeginTime) {
              var compareDate = self.$momm.compareDate(this.customerDeliveryBeginTime.replace(/\-/g, '/'), (self.$momm.getdate() + ' ' + '17:01:00').replace(/\-/g, '/'));
              var hour = this.customerDeliveryBeginTime.split(' ')[1].split(':')[0];
              console.log(hour);
              this.$refs.GoodsInfo.expectTime = compareDate ? '明天 ' + hour + ':00' + '-' + (hour + 1) + ':00' : '今天 ' + hour + ':00' + '-' + (parseInt(hour) + 1) + ':00';
            }
            if (this.isEdit) {
              uni.showToast({
                icon: "none",
                title: "地址省份不能修改~",
                duration: 2000 });

            }
            self.agree = true;
            self.blurValue();
          });
        } else {var _sendOrder =















          sendOrder,_billCode = _sendOrder.billCode,addressDataJJ = _sendOrder.addressDataJJ,addressDataSJ = _sendOrder.addressDataSJ,_goodsPayment = _sendOrder.goodsPayment,_insuredValue = _sendOrder.insuredValue,_blSpecial = _sendOrder.blSpecial,_goodsName = _sendOrder.goodsName,_goodsType = _sendOrder.goodsType,_paymentType = _sendOrder.paymentType,_packingPiece = _sendOrder.packingPiece,_remark = _sendOrder.remark,_goodsWeight = _sendOrder.goodsWeight;
          if (Object.keys(addressDataJJ).length != 0) {
            this.addressDataJJ = addressDataJJ;
          }
          this.addressDataSJ = addressDataSJ;
          self.$nextTick(function () {
            // this.$refs.GoodsInfo.billCode =billCode||'';
            // this.freight = freight||'';
            // this.topayment = topayment||'';
            this.goodsInfo.goodsPayment = _goodsPayment || 0;
            this.goodsInfo.insuredValue = _insuredValue || '';
            this.goodsInfo.blSpecial = _blSpecial || 0;
            this.goodsInfo.goodsName = _goodsName || '';
            this.goodsInfo.goodsType = _goodsType || '';
            this.goodsInfo.packingPiece = _packingPiece || '';
            this.goodsInfo.remark = _remark || '';
            this.goodsInfo.goodsWeight = _goodsWeight || 0;
            this.isCash = _paymentType == '现金' ? true : false;
          });
        }
      }
    },
    setStorageData: function setStorageData() {
      // sendOrder  寄件下单
      if (!this.isEdit) {
        var data = {
          // billCode:this.$refs.GoodsInfo.billCode,  //运单编号
          addressDataJJ: this.addressDataJJ, //寄件地址
          addressDataSJ: this.addressDataSJ, //收件地址
          // freight:this.freight,  //运费
          // topayment:this.topayment,
          goodsPayment: this.goodsInfo.goodsPayment, //代收货款
          insuredValue: this.goodsInfo.insuredValue, //标识成特殊品
          blSpecial: this.goodsInfo.blSpecial, //代收货款
          goodsName: this.goodsInfo.goodsName, //物品名称
          goodsType: this.goodsInfo.goodsType, //物品名称
          paymentType: this.$refs.GoodsInfo.payment_type, //支付方式
          packingPiece: this.goodsInfo.packingPiece, //件数
          remark: this.goodsInfo.remark, //备注
          // specEmployee:this.specEmployee,  //专属业务员
          // specEmployeeCode:this.specEmployeeCode,  //专属业务员编码
          goodsWeight: this.goodsInfo.goodsWeight, //重量
          title: this.titleX };

        this.$setStorageSync('sendOrder', JSON.stringify(data));
      }
    } } };exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["default"]))

/***/ }),

/***/ 92:
/*!********************************************************************************************************************************!*\
  !*** E:/idea-work/ztd/yunda/YDTCP_WeChat/pages/order/send/index.vue?vue&type=style&index=0&id=fb1e2936&lang=scss&scoped=true& ***!
  \********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_fb1e2936_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=fb1e2936&lang=scss&scoped=true& */ 93);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_fb1e2936_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_fb1e2936_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_fb1e2936_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_fb1e2936_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_fb1e2936_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 93:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/idea-work/ztd/yunda/YDTCP_WeChat/pages/order/send/index.vue?vue&type=style&index=0&id=fb1e2936&lang=scss&scoped=true& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ })

},[[86,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/order/send/index.js.map